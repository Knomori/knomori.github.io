<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>ArchLinux下搭建Arm交叉编译环境</title>
    <url>/2021/04/27/ArchLinux%E4%B8%8B%E6%90%AD%E5%BB%BAArm%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91%E7%8E%AF%E5%A2%83/</url>
    <content><![CDATA[<html><head></head><body><p>这学期新开了一门Arm嵌入式，由于开发板不具备资自主编译的能力，所以必须搭建交叉编译环境。当然，交叉编译环境的主编译机器以Linux为佳，而我的主机恰好是Arch，原本以为在Arch上的交叉编译环境的搭建会轻松很多，然而事实是确实经历了一番坎坷的旅程，最终在群友的协助下完成了环境的搭建，故记录此过程以供大家参考。</p>
<h2 id="环境说明："><a href="#环境说明：" class="headerlink" title="环境说明："></a>环境说明：</h2><h3 id="编译环境："><a href="#编译环境：" class="headerlink" title="编译环境："></a>编译环境：</h3><p>Arch Linux x86_64</p>
<p><img src="https://img.imgdb.cn/item/60875dbfd1a9ae528ff67194.jpg" alt="系统环境说明"></p>
<h3 id="运行环境："><a href="#运行环境：" class="headerlink" title="运行环境："></a>运行环境：</h3><p>ARM926EJ-5</p>
<p><img src="https://img.imgdb.cn/item/60875eb0d1a9ae528ffd083c.jpg" alt="运行环境"></p>
<p>很显然，我们的编译环境是64位的操作系统，运行时环境是32位的arm架构的机器。我们的思路也很简单，就是如果你想在开发板上运行程序，先在自己的主机上用arm-linux-gcc进行编译，再拿到开发板上去运行。</p>
<h2 id="准备工作1——启用-multilib-和Octopi"><a href="#准备工作1——启用-multilib-和Octopi" class="headerlink" title="准备工作1——启用 [multilib] 和Octopi"></a>准备工作1——启用 [multilib] 和Octopi</h2><h3 id="启用multilib"><a href="#启用multilib" class="headerlink" title="启用multilib"></a>启用multilib</h3><p>首先我们编辑我们的ArchLinux镜像文件，启用被注释的<code>[multilib]</code>镜像源，并且更新系统。这一步的目的是由于在64位的机器上编译32位的应用程序，可能会出现找不到32位的库的情况，这个库包含了大量的32位的库文件。</p>
<figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">sudo vim /etc/pacman.conf	#编辑镜像文件</span><br></pre></td></tr></tbody></table></figure>
<p><img src="https://img.imgdb.cn/item/60876289d1a9ae528f19720b.jpg" alt="启用multilib库"></p>
<p>接着更新我们的系统：</p>
<figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">sudo pacman -Syu	#更新系统</span><br></pre></td></tr></tbody></table></figure>
<h3 id="使用Octopi（可选）"><a href="#使用Octopi（可选）" class="headerlink" title="使用Octopi（可选）"></a>使用Octopi（可选）</h3><p>我们知道，Arch Linux下默认是没有包管理器的，操作基本上是由<code>pacman</code>这个十分强大的包管理器完成。而<code>Octopi</code>这个包管理器可以很方便的，以图形话的方式查找到我们想要的软件包。你可以使用AUR去安装它：(如果没有<code>yay</code>的话请先安装这个AUR的管理器)</p>
<figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">yay -S octopi	#通过AUR安装octopi</span><br></pre></td></tr></tbody></table></figure>
<h2 id="准备工作2——下载arm-linux-gcc"><a href="#准备工作2——下载arm-linux-gcc" class="headerlink" title="准备工作2——下载arm-linux-gcc"></a>准备工作2——下载<code>arm-linux-gcc</code></h2><p>搜索后发现，网上最多人安装的还是<code>arm-linux-gcc</code>交叉编译器。适合小型的、环境不是特别新的嵌入式环境。这里我已经下载好了，可以直接提取：</p>
<p><a href="https://pan.baidu.com/s/14wvacgfr4rAIGxTK2QYM6w">下载arm-linux-gcc</a> 密码：gieq</p>
<p>下载完成后解压到<code>/opt</code>目录下：（以图形的文件浏览器看就是多了一个FriendlyARM的文件夹）</p>
<p>接下来将<code>arm-linux-gcc</code>添加到环境变量，首先我们编辑<code>～/.zshrc文件</code></p>
<figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">sudo vim ~/.zshrc</span><br></pre></td></tr></tbody></table></figure>
<p>在最下方添加如下字段，即就是将<code>/opt/FriendlyARM</code>下的bin目录到环境变量。</p>
<figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">export PATH=/opt/FriendlyARM/toolschain/4.4.3/bin/:$PATH</span><br></pre></td></tr></tbody></table></figure>
<p>保存退出后执行<code> source ~/.zshrc</code>以立即生效环境变量。这样使用<code>arm-linux-gcc -v</code>查看安装的编译器版本。</p>
<p><img src="https://img.imgdb.cn/item/60876aced1a9ae528f6778aa.jpg" alt="插看其版本"></p>
<h2 id="准备工作3——安装缺少的包文件"><a href="#准备工作3——安装缺少的包文件" class="headerlink" title="准备工作3——安装缺少的包文件"></a>准备工作3——安装缺少的包文件</h2><p>当我们使用<code>arm-linux-gcc</code>去编译我们的c++或c程序时会提示缺少某一个库文件，好的，那么这个库文件在哪里？首先我们可以直接去<code>Octopi</code>包管理器去找有没有这个库，比如我要找<code>libstdc++5</code>这个库，或者<code>lib32-glibc</code>这个库，都可以直接去octopi上查找。它很方便的一个功能就是模糊查找，而且速度较快。</p>
<p><img src="https://img.imgdb.cn/item/60876e0bd1a9ae528f81d1b0.jpg" alt="查找库文件"></p>
<p>另一种情况，比如我们不知道哪个库文件包含有这个库，比如编译器报告A库丢失，然而你去找没有找到A库，当然你会怀疑是不是某一个库，比如B已经包含了A，我们只需要安装B即可。怎么找呢？可以使用下面的命令：</p>
<p><code>pacman -Qo 缺失的库名称</code></p>
<p>如果没有任何一个库文件包含的话，那我也就没办法了。。。</p>
<p>好的言归正传，经过我的测试，你可能需要安装以下这些包才能编译出一个HelloWord：</p>
<p><code>lib32-glibc</code> <code>lib32-ncurses</code> <code>lib32-ncurses5-compat-libs</code> <code>lib32-zlib</code> <code>libstdc++5</code> <code>lib32-gcc-libs</code></p>
<p>编译就不必我多讲了，写一个hello，是而运行的话呢，必须先将文件拷贝到单片机下再运行</p>
<p><img src="https://img.imgdb.cn/item/60876fe8d1a9ae528f8efed8.jpg" alt="编译"></p>
<p><img src="https://img.imgdb.cn/item/60877073d1a9ae528f929ced.png" alt="运行测试"></p>
</body></html>]]></content>
      <categories>
        <category>教程</category>
      </categories>
      <tags>
        <tag>教程</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux下迁移/home分区</title>
    <url>/2021/07/14/ArchLinux%E4%B8%8B%E8%BF%81%E7%A7%BB-home%E5%88%86%E5%8C%BA/</url>
    <content><![CDATA[<html><head></head><body><p>由于当初安装Arch的时候为了方便，就将/home目录和根目录安装在一个分区里了。如今也用了将近快一年的Arch，很明显，/home空间不够用了。这次索性就将其直接划分出一块新的固态给其使用。摸索了一会，发现其实并不难，不过，为了演示方便，这里使用虚拟机进行演示。</p>
<h2 id="确定好新的home分区位置并格式化"><a href="#确定好新的home分区位置并格式化" class="headerlink" title="确定好新的home分区位置并格式化"></a>确定好新的home分区位置并格式化</h2><p>比如我这里准备使用一块新的硬盘作为其新的home分区，而这一步可以使用KDE的分区管理器实现；当然如果不嫌麻烦的话也可以使用<code>fdisk</code>软件进行分区和格式化工作。不过我觉得比较麻烦（狗头）。我直接用KDE分区管理器进行新硬盘的分区和格式化工作：</p>
<ul>
<li><input disabled="" type="checkbox"> 之前的磁盘分配（可以看到所有的东西都被挂载在了/dev/sda硬盘中）：</li>
</ul>
<p><a href="https://pic.imgdb.cn/item/60ee450e5132923bf8f3b2f2.jpg"><img src="https://pic.imgdb.cn/item/60ee450e5132923bf8f3b2f2.jpg" alt="之前的磁盘分配"></a></p>
<ul>
<li><input checked="" disabled="" type="checkbox"> 给新的硬盘格式化为ext4分区：</li>
</ul>
<p><a href="https://pic.imgdb.cn/item/60ee46c55132923bf8ff2733.jpg"><img src="https://pic.imgdb.cn/item/60ee46c55132923bf8ff2733.jpg" alt="格式化新的盘后"></a></p>
<p>可以看到，我们将要迁移/home到新的盘符为<code>/dev/sdb1</code>，格式为<code>ext4</code></p>
<p>如果你是全新的硬盘可能需要通过软件设置新的分区表GPT，然后才能分配新的分区。</p>
<h2 id="迁移-home分区"><a href="#迁移-home分区" class="headerlink" title="迁移/home分区"></a>迁移/home分区</h2><ul>
<li><p>首先创建挂载点，将新建立的分区挂载到挂载点，最后将home下的所有人间备份到分区中：</p>
<p><a href="https://pic.imgdb.cn/item/60ee48585132923bf809edec.jpg"><img src="https://pic.imgdb.cn/item/60ee48585132923bf809edec.jpg" alt="创建临时挂载点"></a></p>
</li>
</ul>
<p>这里的<code>-a</code>属性的意思是复制的时候将文件的权限原封不动的复制过去。否则的话将无法登录。</p>
<ul>
<li><p>将原本的<code>/home</code>目录移动到<code>/home_old</code>做备份用</p>
<p>​    <code>mv /home/* /home_old</code></p>
</li>
<li><p>将之前新分区挂载至home目录，并添加到fatab文件下，实现自动挂载</p>
<p>首先编辑 <code>vim /etc/fstab</code></p>
</li>
</ul>
<p><a href="https://pic.imgdb.cn/item/60ee4a5b5132923bf817d144.jpg"><img src="https://pic.imgdb.cn/item/60ee4a5b5132923bf817d144.jpg" alt="写入新的项目"></a></p>
<p>完成后保存重启计算机。</p>
<h2 id="重启完成之后检查"><a href="#重启完成之后检查" class="headerlink" title="重启完成之后检查"></a>重启完成之后检查</h2><p>首先如果你能重启并成功使用普通用户登录到系统，说明你已经成功了！！！我们当然还可以使用KDE分区编辑器进行查看：我们的新的硬盘已经挂载了我们的home目录。</p>
<p><a href="https://pic.imgdb.cn/item/60ee4c055132923bf823732a.jpg"><img src="https://pic.imgdb.cn/item/60ee4c055132923bf823732a.jpg" alt="查看是否完成操作"></a></p>
<h2 id="能否使用KDE分区编辑器完成上述所有操作？"><a href="#能否使用KDE分区编辑器完成上述所有操作？" class="headerlink" title="能否使用KDE分区编辑器完成上述所有操作？"></a>能否使用KDE分区编辑器完成上述所有操作？</h2><p>我们首先来理一下思路。我们迁移的思路不就是先将原本的<code>/home</code>分区的内容拷贝到新的盘上，然后修改挂载点嘛。细心的小伙伴可能已经发现了，在KDE分区管理器下有一个<code>编辑挂载点</code>的功能。</p>
<p>其实完全是可以的操作，但是记得在修改挂载点之前一定要记得先将原本<code>/home</code>分区的东西先系数拷贝进去，否则，后果会非常严重。因为修改挂载点的操作是立即执行的，所以在修改前一定要记得先进行备份。</p>
</body></html>]]></content>
      <categories>
        <category>教程</category>
      </categories>
      <tags>
        <tag>教程</tag>
      </tags>
  </entry>
  <entry>
    <title>IDEA+Tomcat+JSP+MariaDB的开发环境搭建</title>
    <url>/2021/04/16/IDEA-Tomcat-JSP-MariaDB%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/</url>
    <content><![CDATA[<html><head></head><body><p>因为最近的实验是结合JSP与数据库做课程实验，而老师给的开发环境不知是什么时代的上古工具；又因为自己的平台有些特殊，配置方面遇到了一些小问题，网上也没有可靠的解决方法，故进行一次记录。</p>
<h2 id="环境说明："><a href="#环境说明：" class="headerlink" title="环境说明："></a>环境说明：</h2><p>操作系统：Arch Linux</p>
<p>Tomcat版本：Tomcat9</p>
<p>数据库版本：MariaDB 10.5.9</p>
<p><img src="https://img.imgdb.cn/item/6078ff488322e6675c68b763.jpg" alt="数据库版本信息"></p>
<p>数据库Java驱动版本：<code>mariadb-java-client-2.7.2.jar</code>  </p>
<p><a href="https://downloads.mariadb.org/connector-java/+releases/">MariaDB的Java驱动下载 </a>  <a href="https://dev.mysql.com/downloads/connector/j/">MySQL的Java驱动下载</a></p>
<p>由于MariaDB与MySQL是兼容的，所以你也可以使用MySQL的驱动，不过这里还是建议使用MariaDB提供的。<em>注意这里驱动的不同会使后面导入jar包的语法有细微的差别！！！</em></p>
<h2 id="IDEA配置Tomcat"><a href="#IDEA配置Tomcat" class="headerlink" title="IDEA配置Tomcat"></a>IDEA配置Tomcat</h2><p>好的，我已经默认你安装完了Tomcat9，并且能够正常工作，能够正常访问。如果这一步你还没有做完，请进行百度。</p>
<p>首先，让我们关闭Tomcat9：<code>sudo systemctl stop tomcat9</code>，因为后面开发环境使用Tomcat9时IDEA会直接执行Tomcat9的“副本”，也就是不会直接调用系统的Tomcat9，而是类似于拷贝了一份到你的工作目录下，所有的发布都在这。如果此时调用系统的<code>systemctl</code>命令开启Tomcat9,会使端口冲突。（Tomcat默认端口是8080）</p>
<h3 id="首先新建一个JavaEE的Web项目"><a href="#首先新建一个JavaEE的Web项目" class="headerlink" title="首先新建一个JavaEE的Web项目"></a>首先新建一个JavaEE的Web项目</h3><p><img src="https://img.imgdb.cn/item/607907b58322e6675c795d8a.jpg" alt="javaEEWeb"></p>
<h3 id="在IDEA中配置Tomcat服务器"><a href="#在IDEA中配置Tomcat服务器" class="headerlink" title="在IDEA中配置Tomcat服务器"></a>在IDEA中配置Tomcat服务器</h3><p>点击下拉菜单，选择Edit Configurations.</p>
<p><img src="https://img.imgdb.cn/item/607909288322e6675c7ceb86.jpg" alt="配置服务器1"></p>
<p>依次选择添加一个服务器，选择Tomcat，本地，接下来点击图中的<code>Configure</code></p>
<p><img src="https://img.imgdb.cn/item/60790a898322e6675c7f3046.jpg" alt="配置服务器2"></p>
<p>上图中第三部点进去之后填写你的服务器安装地址：Linux用户可以使用<code>whereis tomcat9</code>来查看Tomcat9的的安装位置。</p>
<p><img src="https://img.imgdb.cn/item/60790b2e8322e6675c803eb2.jpg" alt="填写服务器安装地址"></p>
<h3 id="测试你的服务器"><a href="#测试你的服务器" class="headerlink" title="测试你的服务器"></a>测试你的服务器</h3><p>确保你的服务器是关闭的，我们接下来将使用IDEA启动我们的服务器。</p>
<p><img src="https://img.imgdb.cn/item/607924908322e6675cb69a24.jpg" alt="启动服务器"></p>
<p>如果你是Linux用户，这里可能会遇到一个问题：权限不够，无法启动。根据IDEA的错误提示（用红色的框框进行标注的），可以看出是相关文件权限不够，IDEA无法复制Tomcat9的文件到我们的工作目录。我们可以使用Linux的<code>chmod</code>命令对相关文件加入其他人的可读权限即可。这是我的Tomcat9文件放行可读权限后的情况：</p>
<p>首先：<code>sudo cd /usr/share/tomcat9/conf</code></p>
<p>接着：<code>sudo chmod 644 catalina.policy catalina.properties context.xml jaspic-providers.xml jaspic-providers.xsd logging.properties server.xml tomcat-users.xml tomcat-users.xsd web.xml</code></p>
<p><img src="https://img.imgdb.cn/item/607925af8322e6675cb91707.jpg" alt="放行权限"></p>
<p>放行完成后我们就可以通过IDEA启动我们的服务器了。而且，在上面的图中，我们设置了自动更新类和资源，所以我们编辑完源文件后不必重启服务器，只需要点击浏览器图标或者刷新网页即可更新。</p>
<h2 id="连接MariaDB数据库进行测试"><a href="#连接MariaDB数据库进行测试" class="headerlink" title="连接MariaDB数据库进行测试"></a>连接MariaDB数据库进行测试</h2><p>首先保证你的数据库已经完成了安装和初始化工作，如果没有的话请进行搜索。这里只进行讨论如何连接。</p>
<h3 id="首先在数据库中新建一个表"><a href="#首先在数据库中新建一个表" class="headerlink" title="首先在数据库中新建一个表"></a>首先在数据库中新建一个表</h3><p>以我的数据库为例，数据库名称为：<code>MyStudent</code>；表的名称为：<code>jspdb</code>；数据库内容如下：</p>
<p><img src="https://img.imgdb.cn/item/607928318322e6675cbeb96c.jpg" alt="数据库信息"></p>
<h3 id="在IDEA中给工程添加数据库驱动jar包"><a href="#在IDEA中给工程添加数据库驱动jar包" class="headerlink" title="在IDEA中给工程添加数据库驱动jar包"></a>在IDEA中给工程添加数据库驱动jar包</h3><p>在工程的WEB-INF目录下，新建一个名为<code>lib</code>的文件夹，文件夹中放入我们下载好了的mariadb的驱动jar包。</p>
<p><img src="https://img.imgdb.cn/item/6079296f8322e6675cc196f4.jpg" alt="添加下载的jar文件"></p>
<p>接着打开本工程的目录结构：</p>
<p><img src="https://img.imgdb.cn/item/60792a098322e6675cc2bc4e.jpg" alt="打开工程目录结构"></p>
<p>接着添加我们的jar驱动到该工程目录下：</p>
<p><img src="https://img.imgdb.cn/item/60792a798322e6675cc39770.jpg" alt="添加驱动jar"></p>
<p>选择刚刚存放jar的文件，接着勾选上即可：</p>
<p><img src="https://img.imgdb.cn/item/60792afe8322e6675cc484d7.jpg" alt="选择jar包"></p>
<h3 id="在JSP页面中测试连接"><a href="#在JSP页面中测试连接" class="headerlink" title="在JSP页面中测试连接"></a>在JSP页面中测试连接</h3><p>在IDEA的<code>index.jsp</code>页面写入以下内容：（注意区分你的表和我的表的不同之处）</p>
<figure class="highlight"><table><tbody><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;连接数据库&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h3&gt;测试连接数据库&lt;/h3&gt;</span><br><span class="line">&lt;%<span class="meta">@page</span> <span class="keyword">import</span>=<span class="string">"java.sql.*"</span> %&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;%</span><br><span class="line">    String DRIVER_PATH = <span class="string">"org.mariadb.jdbc.Driver"</span>; <span class="comment">//驱动路径</span></span><br><span class="line">    String URL = <span class="string">"jdbc:mysql://localhost:3306/MyStudent?serverTimezone=GMT"</span>; <span class="comment">//包括数据库的名称MyStudent</span></span><br><span class="line">    String USER_NAME = <span class="string">"knosql"</span>;      <span class="comment">//数据库用户名</span></span><br><span class="line">    String PASSWORD = <span class="string">"76KLOP"</span>;     <span class="comment">//数据库密码</span></span><br><span class="line">    Connection con = <span class="keyword">null</span>;</span><br><span class="line">    PreparedStatement preparedStatement = <span class="keyword">null</span>;</span><br><span class="line">    ResultSet resultSet = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> {</span><br><span class="line">        Class.forName(DRIVER_PATH);</span><br><span class="line">        con = DriverManager.getConnection(URL, USER_NAME, PASSWORD);</span><br><span class="line">        System.out.println(con);</span><br><span class="line">        <span class="comment">//      判断数据库是否连接成功</span></span><br><span class="line">        <span class="keyword">if</span> (con != <span class="keyword">null</span>) {</span><br><span class="line">            out.println(<span class="string">"数据库连接成功"</span>);</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            out.println(<span class="string">"数据库连接失败"</span>);</span><br><span class="line">        }</span><br><span class="line">        String sql = <span class="string">"SELECT * FROM jspdb"</span>;	<span class="comment">//包括数据库的表的名称</span></span><br><span class="line"></span><br><span class="line">        preparedStatement = con.prepareStatement(sql);</span><br><span class="line">        resultSet = preparedStatement.executeQuery();</span><br><span class="line">    } <span class="keyword">catch</span> (Exception e) {</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    }</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">&lt;%</span><br><span class="line">    <span class="comment">//打印获取到的数据库的内容</span></span><br><span class="line">    <span class="keyword">while</span> (resultSet.next()) {</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;商品名称:&lt;% out.print(resultSet.getString("goodsname"));%&gt;&lt;/p&gt;</span><br><span class="line">&lt;p&gt;商品价格:&lt;%=resultSet.getString(<span class="string">"prise"</span>)%&gt;</span><br><span class="line">&lt;/p&gt;</span><br><span class="line">&lt;hr&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">//关闭数据库</span></span><br><span class="line">    resultSet.close();</span><br><span class="line">    preparedStatement.close();</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></tbody></table></figure>
<p>注意我们MariaDB的数据库驱动路径的写法是：<code>org.mariadb.jdbc.Driver</code></p>
<p>而如果你使用的是MySQL数据库的驱动路径的写法应该是：<code>com.mysql.jdbc.Driver</code></p>
<p>如果测试成功的话，我们点击浏览器图标就可以看到连接后的结果啦：</p>
<p><img src="https://img.imgdb.cn/item/60792cd08322e6675cc7d775.jpg" alt="数据库的连接结果"></p>
<p>使用MariaDB的一个好处就是，它与MySQL的数据库驱动是兼容的，而且官方也进行了开源，我们可以直在IDEA的jar文件处点击小三角箭头查看其源代码。</p>
</body></html>]]></content>
      <categories>
        <category>教程</category>
      </categories>
      <tags>
        <tag>环境搭建</tag>
      </tags>
  </entry>
  <entry>
    <title>使用树莓派和samba搭建个人NAS</title>
    <url>/2021/02/06/%E4%BD%BF%E7%94%A8%E6%A0%91%E8%8E%93%E6%B4%BE%E5%92%8Csamba%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BANAS/</url>
    <content><![CDATA[<html><head></head><body><p>我们知道如果想要共享文件，在Linux对Linux的环境下，最简单的方法就是通过NIS了；而Windows对Windows，最简单的方法则是“网上邻居”。那如果局域网中既有Windows也有Linux而且想要共享文件系统的话，那该怎么办？</p>
<p>那就使用SAMBA服务器好了。</p>
<p>SAMBA可以让Linux加入Windows的网上邻居支持，让不同的平台可以共享文件系统，非常好用。而且它的配置极其简单。</p>
<h3 id="环境简介"><a href="#环境简介" class="headerlink" title="环境简介"></a>环境简介</h3><p>使用树莓派的系统如下所示，基于的是Debian的64位的操作系统：</p>
<p><a href="https://imgchr.com/i/yY6Zod"><img src="https://s3.ax1x.com/2021/02/06/yY6Zod.png" alt="系统信息"></a></p>
<p><strong>提示：</strong> 由于树莓派每次接入局域网时，路由器给分配的IP不固定，所以建议提前在路由器的管理页面进行树莓派的硬件MAC与IP地址的绑定。这样每次树莓派连接到路由器都会给分配一个固定的IP.</p>
<h3 id="安装Samba和配套软件"><a href="#安装Samba和配套软件" class="headerlink" title="安装Samba和配套软件"></a>安装Samba和配套软件</h3><figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">sudo apt install samba samba-common-<span class="built_in">bin</span></span><br></pre></td></tr></tbody></table></figure>
<p>期间会有此选项选择是即可</p>
<h3 id="配置Samba并指定共享的目录"><a href="#配置Samba并指定共享的目录" class="headerlink" title="配置Samba并指定共享的目录"></a>配置Samba并指定共享的目录</h3><p>samba的配置文件路径为：<code>/etc/samba/smb.conf</code>，可以使用<code>nano</code>或<code>vim</code>编辑器编辑此文件：</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">sudo nano /etc/samba/smb.conf</span><br></pre></td></tr></tbody></table></figure>
<p>在最后添加自己的配置：</p>
<figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">[Shared]</span><br><span class="line">   path = /media/pi #要共享文件夹的路径</span><br><span class="line">   valid users = pi	#允许的用户</span><br><span class="line">   browseable = yes	#浏览及写入的权限</span><br><span class="line">   writable = yes	</span><br><span class="line">   read only = no</span><br></pre></td></tr></tbody></table></figure>
<p>如果要共享的文件夹很多的话，也可以添加多个自己的配置。</p>
<p>如果要共享的是外置硬盘，位置是<code>/media/pi</code></p>
<p>编辑完成之后，我们可以对写入的信息进行测试，防止出错：</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">testparm</span><br></pre></td></tr></tbody></table></figure>
<p>如果没有提示错误信息，就表示写入的格式正确。</p>
<p><a href="https://imgchr.com/i/yYgSv6"><img src="https://s3.ax1x.com/2021/02/06/yYgSv6.png" alt="测试写入的是否正确"></a></p>
<h3 id="为samba分配可访问的用户并启动此服务"><a href="#为samba分配可访问的用户并启动此服务" class="headerlink" title="为samba分配可访问的用户并启动此服务"></a>为samba分配可访问的用户并启动此服务</h3><p>设置加入共享的用户pi并设置密码（此密码用于samba登陆，可以与pi用户原本的密码不一致）</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">sudo smbpasswd -a pi</span><br></pre></td></tr></tbody></table></figure>
<p><a href="https://imgchr.com/i/yYgRsK"><img src="https://s3.ax1x.com/2021/02/06/yYgRsK.png" alt="给samba分配可访问的用户pi" style="zoom: 67%;"></a></p>
<p>到此samba的配置工作可以说完成啦。</p>
<p>接下来我们启动samba服务：</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">sudo systemctl start smbd</span><br></pre></td></tr></tbody></table></figure>
<p>查看samba服务状态：</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">systemctl status smbd</span><br></pre></td></tr></tbody></table></figure>
<p>如果显示绿色running表示服务已经正常启动并运行啦：</p>
<p><a href="https://imgchr.com/i/yta1BR"><img src="https://s3.ax1x.com/2021/02/07/yta1BR.png" alt="查看samba状态"></a></p>
<h3 id="Linux用户访问文件服务"><a href="#Linux用户访问文件服务" class="headerlink" title="Linux用户访问文件服务"></a>Linux用户访问文件服务</h3><p>以KDE桌面环境为例，可以直接在地址栏输入以下格式的地址就可以看到我们设置的共享文件夹或磁盘啦：</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">smb:/你的树莓派IP地址</span><br></pre></td></tr></tbody></table></figure>
<p><a href="https://imgchr.com/i/yY2znK"><img src="https://s3.ax1x.com/2021/02/06/yY2znK.png" alt="Linux用户登陆"></a></p>
<p>我们还可以将这个共享的地址固定到侧边栏，方便日后直接访问。可以在侧边栏的 <strong><em>远程</em></strong> 选项右键-&gt;<strong><em>添加位置</em></strong> ，配置好后即可快速访问。</p>
<h3 id="Windows用户访问"><a href="#Windows用户访问" class="headerlink" title="Windows用户访问"></a>Windows用户访问</h3><p>Windows用户可以直接在 <em>此电脑</em> 右键，选择 <em>映射网络驱动器</em> 填写好格式后即可访问。这里注意必须填写正确的格式及共享文件夹的名称。</p>
<p>Windows添加后下次打开此电脑会发现共享的文件夹已经固定在了下面。</p>
<p><a href="https://imgchr.com/i/yYRovt"><img src="https://s3.ax1x.com/2021/02/06/yYRovt.png" alt="Windows用户"></a></p>
<h3 id="防踩坑指南"><a href="#防踩坑指南" class="headerlink" title="防踩坑指南"></a>防踩坑指南</h3><p>第一次配置时我们会发现，明明配置好了，打开网络都能看到我们的这个文件夹了，但为什么就是看不到我插入的硬盘或U盘呢？其实，如果你的树莓派当初选择的是带桌面启动的模式，此服务必须在进入桌面后才可以生效。使用VNC登陆进树莓派即可。如果是家用则完全可以设置树莓派是开机自动以pi用户自动登录，实现此服务插电即用。</p>
<p>其次，如果树莓派的设定是登陆时使用pi用户以控制台登陆而非图形界面登陆，则u盘等外置硬盘不会自动挂载，这时尝试连接你的特定路径时可能会发生下面的情况：</p>
<p><img src="https://pic.imgdb.cn/item/61ea84b42ab3f51d91b72454.png" alt="找不到"></p>
<p>因为这个时候U盘还没有挂载，所以没法找到路径。解决方法就是自行设置控制台下的自动挂载外置U盘或者设定树莓派以桌面方式登陆，或者切换到桌面模式：<code>sudo systemctl isolate graphical.target</code></p>
</body></html>]]></content>
      <categories>
        <category>教程</category>
      </categories>
      <tags>
        <tag>树莓派</tag>
      </tags>
  </entry>
  <entry>
    <title>使用树莓派搭建Aria2下载服务器</title>
    <url>/2021/02/25/%E4%BD%BF%E7%94%A8%E6%A0%91%E8%8E%93%E6%B4%BE%E6%90%AD%E5%BB%BAAria2%E4%B8%8B%E8%BD%BD%E6%9C%8D%E5%8A%A1%E5%99%A8/</url>
    <content><![CDATA[<html><head></head><body><h3 id="Aria2-超快速下载实用程序（简介）"><a href="#Aria2-超快速下载实用程序（简介）" class="headerlink" title="Aria2 - 超快速下载实用程序（简介）"></a>Aria2 - 超快速下载实用程序（简介）</h3><p>aria2是用于下载文件的实用程序。支持的协议是HTTP（S），FTP，SFTP，BitTorrent和Metalink。  aria2可以从多个来源/协议下载文件，并尝试利用最大下载带宽。它支持同时从HTTP（S）/ FTP /  SFTP和BitTorrent下载文件，而从HTTP（S）/ FTP /  SFTP下载的数据上传到BitTorrent群。使用Metalink的块校验和，aria2在下载BitTorrent之类的文件时会自动验证数据块。</p>
<p><a href="https://github.com/aria2/aria2">GitHub项目地址</a></p>
<h3 id="环境简介"><a href="#环境简介" class="headerlink" title="环境简介"></a>环境简介</h3><p>本次使用的树莓派环境是：基于Debian的64位操作系统，详情如下：</p>
<p><a href="https://img.imgdb.cn/item/603717f75f4313ce2595caec.jpg"><img src="https://img.imgdb.cn/item/603717f75f4313ce2595caec.jpg" alt="环境简介"></a></p>
<h3 id="安装Aria2并配置"><a href="#安装Aria2并配置" class="headerlink" title="安装Aria2并配置"></a>安装Aria2并配置</h3><p>我们直接使用软件源安装：</p>
<p><code>sudo apt install aria2</code></p>
<p>接下来创建配置文件：</p>
<p><code>mkdir -p ~/.config/aria2/    #创建存放配置的文件夹</code></p>
<p><code>nano ~/.config/aria2/aria2.config    #添加一个aria2的配置文件（注意不要用sudo）</code></p>
<p>在这个文件中写入我们自己的配置：</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">#后台运行</span></span><br><span class="line">daemon=true</span><br><span class="line"><span class="comment">#用户名</span></span><br><span class="line"><span class="comment">#rpc-user=user</span></span><br><span class="line"><span class="comment">#密码</span></span><br><span class="line"><span class="comment">#rpc-passwd=passwd</span></span><br><span class="line"><span class="comment">#设置加密的密钥</span></span><br><span class="line">rpc-secret=secret</span><br><span class="line"><span class="comment">#允许rpc</span></span><br><span class="line">enable-rpc=true</span><br><span class="line"><span class="comment">#允许所有来源, web界面跨域权限需要</span></span><br><span class="line">rpc-allow-origin-<span class="built_in">all</span>=true</span><br><span class="line"><span class="comment">#是否启用https加密，启用之后要设置公钥,私钥的文件路径</span></span><br><span class="line"><span class="comment">#rpc-secure=true</span></span><br><span class="line"><span class="comment">#启用加密设置公钥</span></span><br><span class="line"><span class="comment">#rpc-certificate=/home/pi/.config/aria2/example.crt</span></span><br><span class="line"><span class="comment">#启用加密设置私钥</span></span><br><span class="line"><span class="comment">#rpc-private-key=/home/pi/.config/aria2/example.key</span></span><br><span class="line"><span class="comment">#允许外部访问，false的话只监听本地端口</span></span><br><span class="line">rpc-listen-<span class="built_in">all</span>=true</span><br><span class="line"><span class="comment">#RPC端口, 仅当默认端口被占用时修改</span></span><br><span class="line"><span class="comment">#rpc-listen-port=6800</span></span><br><span class="line"><span class="comment">#最大同时下载数(任务数), 路由建议值: 3</span></span><br><span class="line"><span class="built_in">max</span>-concurrent-downloads=<span class="number">5</span></span><br><span class="line"><span class="comment">#断点续传</span></span><br><span class="line"><span class="keyword">continue</span>=true</span><br><span class="line"><span class="comment">#同服务器连接数</span></span><br><span class="line"><span class="built_in">max</span>-connection-per-server=<span class="number">5</span></span><br><span class="line"><span class="comment">#最小文件分片大小, 下载线程数上限取决于能分出多少片, 对于小文件重要</span></span><br><span class="line"><span class="built_in">min</span>-split-size=10M</span><br><span class="line"><span class="comment">#单文件最大线程数, 路由建议值: 5</span></span><br><span class="line">split=<span class="number">10</span></span><br><span class="line"><span class="comment">#下载速度限制</span></span><br><span class="line"><span class="built_in">max</span>-overall-download-limit=<span class="number">0</span></span><br><span class="line"><span class="comment">#单文件速度限制</span></span><br><span class="line"><span class="built_in">max</span>-download-limit=<span class="number">0</span></span><br><span class="line"><span class="comment">#上传速度限制</span></span><br><span class="line"><span class="built_in">max</span>-overall-upload-limit=<span class="number">0</span></span><br><span class="line"><span class="comment">#单文件速度限制</span></span><br><span class="line"><span class="built_in">max</span>-upload-limit=<span class="number">0</span></span><br><span class="line"><span class="comment">#断开速度过慢的连接</span></span><br><span class="line"><span class="comment">#lowest-speed-limit=0</span></span><br><span class="line"><span class="comment">#验证用，需要1.16.1之后的release版本</span></span><br><span class="line"><span class="comment">#referer=*</span></span><br><span class="line"><span class="comment">#文件保存路径, 默认为当前启动位置(这里我的是下载到用户的Downloads文件夹下，可以根据需要修改)</span></span><br><span class="line"><span class="built_in">dir</span>=/media/pi/Downloads</span><br><span class="line"><span class="comment">#文件缓存, 使用内置的文件缓存, 如果你不相信Linux内核文件缓存和磁盘内置缓存时使用, 需要1.16及以上版本</span></span><br><span class="line"><span class="comment">#disk-cache=0</span></span><br><span class="line"><span class="comment">#另一种Linux文件缓存方式, 使用前确保您使用的内核支持此选项, 需要1.15及以上版本(?)</span></span><br><span class="line"><span class="comment">#enable-mmap=true</span></span><br><span class="line"><span class="comment">#文件预分配, 能有效降低文件碎片, 提高磁盘性能. 缺点是预分配时间较长</span></span><br><span class="line"><span class="comment">#所需时间 none &lt; falloc ? trunc &lt;&lt; prealloc, falloc和trunc需要文件系统和内核支持</span></span><br><span class="line">file-allocation=prealloc</span><br><span class="line"><span class="comment">#不进行证书校验</span></span><br><span class="line">check-certificate=false</span><br><span class="line"><span class="comment">#保存下载会话</span></span><br><span class="line">save-session=/home/pi/.config/aria2/aria2.session</span><br><span class="line"><span class="built_in">input</span>-file=/home/pi/.config/aria2/aria2.session</span><br><span class="line"><span class="comment">#断电续传</span></span><br><span class="line">save-session-interval=<span class="number">60</span></span><br></pre></td></tr></tbody></table></figure>
<p>注意我这里的下载路径是<code>/media/pi/Downloads</code>，可以根据自己的情况修改;并且我这里设置的rpc密钥是<code>secret</code>。这些设置可以在后面以图形化的方式修改。</p>
<p>​      </p>
<p>配置完成后，还要创建该会话空白文件：</p>
<p><code>touch /home/pi/.config/aria2/aria2.session</code></p>
<p>启动并测试Aria2是否成功启动：</p>
<p><code>aria2c --conf-path=/home/pi/.config/aria2/aria2.config</code></p>
<p>可以使用<code>ps aux|grep aria2</code>查看是否有进程启动，如果有显示则说明启动成功了。</p>
<p><a href="https://img.imgdb.cn/item/6037207a5f4313ce25a40803.jpg"><img src="https://img.imgdb.cn/item/6037207a5f4313ce25a40803.jpg"></a></p>
<h3 id="设置Aria服务和开机启动"><a href="#设置Aria服务和开机启动" class="headerlink" title="设置Aria服务和开机启动"></a>设置Aria服务和开机启动</h3><p>创建并编辑aria.service文件 ：</p>
<p><code>sudo nano /lib/systemd/system/aria.service</code></p>
<p>在该文件写入以下内容：</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=Aria2 Service</span><br><span class="line">After=network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">User=pi</span><br><span class="line">Type=forking</span><br><span class="line">ExecStart=/usr/bin/aria2c --conf-path=/home/pi/.config/aria2/aria2.config</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></tbody></table></figure>
<p>重新载入服务，并设置开机启动：</p>
<p><code>sudo systemctl daemon-reload sudo systemctl enable aria</code></p>
<p><em>重启</em> 之后我们检查下aria服务的状态：<code>systemctl status aria</code></p>
<p><a href="https://img.imgdb.cn/item/603722165f4313ce25a68fc9.jpg"><img src="https://img.imgdb.cn/item/603722165f4313ce25a68fc9.jpg" alt="重启之后查看服务状态"></a></p>
<h3 id="安装Aria2的Web可视化前端"><a href="#安装Aria2的Web可视化前端" class="headerlink" title="安装Aria2的Web可视化前端"></a>安装Aria2的Web可视化前端</h3><p>首先安装nginx和git：</p>
<p><code>sudo apt install nginx git</code></p>
<p>由于aria2的前端界面有好几种，这里就暂时选用AriaNg做管理界面。</p>
<p>可以在这里下载到最新的版本：<a href="https://github.com/mayswind/AriaNg">AriaNg</a> </p>
<p><a href="https://img.imgdb.cn/item/603755165f4313ce25ff498b.jpg"><img src="https://img.imgdb.cn/item/603755165f4313ce25ff498b.jpg" alt="点击即可下载"></a></p>
<p>进去之在第二个zip包上右键，选择复制链接地址：</p>
<p><a href="https://img.imgdb.cn/item/603755c35f4313ce25003688.jpg"><img src="https://img.imgdb.cn/item/603755c35f4313ce25003688.jpg" alt="下载最新版本"></a></p>
<p>接下来回到ssh终端，执行下载任务，并重命名为aria-ng：</p>
<p><code>wget 你复制的链接 -O aria-ng.zip</code></p>
<p>解压：</p>
<p><code>unzip aria-ng.zip -d aria-ng</code></p>
<p>将aria-ng放到nginx的/var/www/html/目录下，然后设置开机启动nginx：</p>
<p><code>sudo mv aria-ng /var/www/html/</code></p>
<p><code>sudo systemctl enable nginx</code></p>
<p>用浏览器访问树莓派IP下的aria-ng，即：<code>http://你的树莓派地址/aria-ng</code><br>然后在<code>系统设置</code>点击<code>AriaNg设置</code> –&gt; <code>全局</code> –&gt; 设置语言为中文 –&gt; 点击<code>RPC</code>–&gt;修改为 rpc 密钥：<code>secret</code></p>
<p><a href="https://img.imgdb.cn/item/603757505f4313ce25023512.jpg"><img src="https://img.imgdb.cn/item/603757505f4313ce25023512.jpg"></a></p>
<p>这样就配置完我们的AriaNg的Web界面啦。在设置里我们就可以同图形化的方式进行设置各个具体的参数（如果你需要的话）。</p>
<h3 id="浏览器插件"><a href="#浏览器插件" class="headerlink" title="浏览器插件"></a>浏览器插件</h3><p>各个浏览器相关的插件很多，以火狐为例可以直接在附加组建里搜索Aria2，比如<code>Aria2下载器集成组件</code>：</p>
<p>添加完后会提示设置服务器，我们只需要保持和前面的AriaNg的设置一致即可：</p>
<p><a href="https://img.imgdb.cn/item/603759855f4313ce250565f6.jpg"><img src="https://img.imgdb.cn/item/603759855f4313ce250565f6.jpg"></a></p>
<p><a href="https://img.imgdb.cn/item/60375a135f4313ce250622fc.jpg"><img src="https://img.imgdb.cn/item/60375a135f4313ce250622fc.jpg"></a></p>
<p><a href="https://img.imgdb.cn/item/60375a4f5f4313ce25066d18.jpg"><img src="https://img.imgdb.cn/item/60375a4f5f4313ce25066d18.jpg"></a></p>
<p>全部设置完成之后我们会发现浏览器多出了一个附加组件，可以根据开关决定是否调用树莓派的Aria2下载服务器，点击详情可以直接进入我们的AriaNg的Web控制界面。</p>
<p><a href="https://img.imgdb.cn/item/60375b1d5f4313ce25077bd3.jpg"><img src="https://img.imgdb.cn/item/60375b1d5f4313ce25077bd3.jpg"></a></p>
<p>值得注意的是，从详情进入后可能需要再次配置一次AriaNg页面（浏览器缓存的原因），填写的数据和配置AriaNg的方式一致。</p>
<h3 id="实际效果"><a href="#实际效果" class="headerlink" title="实际效果"></a>实际效果</h3><p>当点击下载按钮时：</p>
<p><a href="https://img.imgdb.cn/item/60375cda5f4313ce2509aa93.jpg"><img src="https://img.imgdb.cn/item/60375cda5f4313ce2509aa93.jpg"></a></p>
<p>点击下载就会调用树莓派的Aria2进行下载，如果不想下载的话可以点击 <em>另存为</em> 转到浏览器本地下载。</p>
<p><a href="https://img.imgdb.cn/item/60375d395f4313ce250a34d2.jpg"><img src="https://img.imgdb.cn/item/60375d395f4313ce250a34d2.jpg"></a></p>
<p>转到AriaNg,可以看到我们的下载已经开始啦。</p>
<p><a href="https://img.imgdb.cn/item/60375d785f4313ce250a81e5.jpg"><img src="https://img.imgdb.cn/item/60375d785f4313ce250a81e5.jpg"></a></p>
<h3 id="BT下载速度慢问题"><a href="#BT下载速度慢问题" class="headerlink" title="BT下载速度慢问题"></a>BT下载速度慢问题</h3><p>有时候我们会发现，使用aria2没有迅雷下载快，甚至下不动，原因是迅雷有自己的服务器，而Aria2没有加速服务器，有些种子一直没几个人上传导致只有几KB的速度甚至完全没速度，这种情况下该怎么办呢？<br> 给Aria2添加Tracker，让Aria2不只是从DHT网络或者种子文件中存储的Tracker信息，从而找到更多的下载源。 </p>
<p><a href="https://www.yaozuopan.top/index.php/archives/1014/">Tracker服务器</a></p>
<p>比如这里汇总了20个常用的最优Tracker：（已经用逗号分割）</p>
<figure class="highlight python"><table><tbody><tr><td class="code"><pre><span class="line">bt-tracker=udp://tracker.coppersurfer.tk:<span class="number">6969</span>/announce,udp://tracker.<span class="built_in">open</span>-internet.nl:<span class="number">6969</span>/announce,udp://tracker.skyts.net:<span class="number">6969</span>/announce,udp://tracker.piratepublic.com:<span class="number">1337</span>/announce,udp://tracker.opentrackr.org:<span class="number">1337</span>/announce,udp://<span class="number">9.</span>rarbg.to:<span class="number">2710</span>/announce,udp://retracker.coltel.ru:<span class="number">2710</span>/announce,udp://pubt.<span class="keyword">in</span>:<span class="number">2710</span>/announce,udp://public.popcorn-tracker.org:<span class="number">6969</span>/announce,udp://z.crazyhd.com:<span class="number">2710</span>/announce,udp://wambo.club:<span class="number">1337</span>/announce,udp://tracker4.itzmx.com:<span class="number">2710</span>/announce,udp://tracker1.wasabii.com.tw:<span class="number">6969</span>/announce,udp://tracker.zer0day.to:<span class="number">1337</span>/announce,udp://tracker.xku.tv:<span class="number">6969</span>/announce,udp://tracker.vanitycore.co:<span class="number">6969</span>/announce,udp://ipv4.tracker.harry.lu:<span class="number">80</span>/announce,udp://inferno.demonoid.pw:<span class="number">3418</span>/announce,udp://<span class="built_in">open</span>.facedatabg.net:<span class="number">6969</span>/announce,udp://mgtracker.org:<span class="number">6969</span>/announce</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<p><a href="https://img.imgdb.cn/item/60375ed35f4313ce250c5b74.png"><img src="https://img.imgdb.cn/item/60375ed35f4313ce250c5b74.png"></a></p>
<p>原创文章，转载请注明出处。</p>
</body></html>]]></content>
      <categories>
        <category>教程</category>
      </categories>
      <tags>
        <tag>树莓派</tag>
      </tags>
  </entry>
  <entry>
    <title>「git-1」关于Git你应该知道的东西</title>
    <url>/2021/04/13/%E5%85%B3%E4%BA%8Egit-%E4%BD%A0%E5%BA%94%E8%AF%A5%E7%9F%A5%E9%81%93%E7%9A%84%E4%B8%9C%E8%A5%BF/</url>
    <content><![CDATA[<html><head></head><body><h2 id="Git的前世今生"><a href="#Git的前世今生" class="headerlink" title="Git的前世今生"></a>Git的前世今生</h2><p>Git 是 Linus Torvalds 2005年为了帮助管理 Linux 内核开发而开发的一个开放源码的版本控制软件。版本控制系统记录着我们随时间推移而对代码的更改，存储在一个特殊的数据库中，我们叫它Repository（仓库）。我们可以查看我们项目的历史，看看是谁在什么时间做了哪些更改，如果有错误的话，我们也可以很轻易地将项目还原到以前的状态。    </p>
<p>Git和Mercurial都是分布式版本控制系统，其中Git最受欢迎的版本控制系统，因为它免费、开源、而且超级快和可扩展的操作；例如分支和合并在其他的版本控制系统中非常缓慢且及其痛苦。</p>
<p>据统计，全球90%的开发人员使用git，这也就是为什么几乎所有的开发人员述职的时候都提到git的原因。所以git是履历表中必备的技能，应该由内到外的了解。了解它如何跟踪项目的历史和如何有效地与他人合作。</p>
<h2 id="如何开始"><a href="#如何开始" class="headerlink" title="如何开始"></a>如何开始</h2><p><a href="https://git-scm.com/">下载Git</a></p>
<p>我们接下来会使用控制台和一些简单的GUI程序进行演示，并且注意，<em>这是一个简单的git引入教程，如果你已经了解了工作流、想要看相关的命令的话，可以直接看本系列的第二篇。</em>所以，首先确保你安装好了Git.这是我的控制台，你的可能与我的看起来不一样，不过没有关系，这是我们要执行Git的地方。</p>
<p><img src="https://img.imgdb.cn/item/60759ab58322e6675c79566d.jpg" alt="我的控制台"></p>
<h3 id="初始化配置Git"><a href="#初始化配置Git" class="headerlink" title="初始化配置Git"></a>初始化配置Git</h3><p>第一次使用Git时，我们必须指定一些配置设置。我们必须指定我们的名称、电子邮件、默认的编辑器（可选，在Linux和Mac下默认是vim）以及它如何处理行尾。我们可以指定这些配置设置在3个不同的级别上：系统级别、全局级别和本地级别。他们的作用关系如下所示：</p>
<p><img src="https://img.imgdb.cn/item/60759c958322e6675c7d9d76.jpg" alt="初始化级别"></p>
<p>我们可以使用<code>git config</code> 接要配置的级别，再接上相应的项目，比如这里： </p>
<blockquote>
<p><code>git config --global user.name "Your Name"</code><br> #用户名<br><code>git config --global user.email "email@example.com"</code><br> #邮箱</p>
<p>查看信息：</p>
<p><code>git config -l</code></p>
</blockquote>
<ul>
<li><input checked="" disabled="" type="checkbox"> <em>如果再次以编辑器的方式配置git的设置我们可以使用 <code>git config --global -e</code>  编辑和查看我们的设置。</em></li>
</ul>
<h3 id="什么是文件行尾，怎么处理？"><a href="#什么是文件行尾，怎么处理？" class="headerlink" title="什么是文件行尾，怎么处理？"></a>什么是文件行尾，怎么处理？</h3><p>在Windows上，每一个文件的行尾都被标记上了两个特殊的字符：回车和换行。在Mac和Linux上，行尾用换行符表示。这意味着，如果不正确处理行尾，会导致一些奇怪的问题。</p>
<p><img src="https://img.imgdb.cn/item/6075a0fc8322e6675c8a9b4d.jpg" alt="win和linux的行尾"></p>
<p>为了使不同的操作平台得到相同的代码，我们必须修改Git的行尾处理设置。简而言之，在Windows平台，我们需要设置<code>core.autocrlf</code>属性为<code>true</code>，如果是Linux或Mac平台，则设置为<code>input</code>.例如我是Linux平台，设置为：</p>
<p><img src="https://img.imgdb.cn/item/6075a90c8322e6675c9f3b2e.jpg"></p>
<h3 id="寻求帮助"><a href="#寻求帮助" class="headerlink" title="寻求帮助"></a>寻求帮助</h3><p>如果你想了解git的相关命令信息，最简单的方法就是搜索，不过，git本身也提供了丰富的帮助文档。比如你想查询关于git config的相关命令，可以在终端中键入<code>git config --help</code>查看完整的帮助。当然你还可以输入<code>git config -h</code>查看简短的总结。</p>
<h2 id="Git的工作方式"><a href="#Git的工作方式" class="headerlink" title="Git的工作方式"></a>Git的工作方式</h2><p>在这一章节中，我们将讨论经常被误解的git基本概念和工作方式，很多人在没有适当了解的情况下使用基本的git命令，这也是他们不断卡住的原因。</p>
<p>首先，让我们建立一个工程文件夹。假设我的工程是<code>TestGit</code>，首先让我们初始化一个git仓库，使用的命令是<code>git init</code>.</p>
<p>如果建立了初始的git仓库后，回到我们的终端，使用zsh终端的好处就是，在进入这个文件夹后你可以很直观地看到，终端会有明显的提示这是一个git存储库，如下图。这里展示的是zsh终端环境，在Windows平台可以安装posh-git.倘若没有装像我一样的终端也没有关系，它仅仅会使git变得更加漂亮。</p>
<p><img src="https://img.imgdb.cn/item/6076d8c18322e6675ccab28f.jpg" alt="zsh明确指示"></p>
<h3 id="git隐藏文件夹"><a href="#git隐藏文件夹" class="headerlink" title=".git隐藏文件夹"></a>.git隐藏文件夹</h3><p>初始化完成以后，我们会发现，在工程文件夹下会出现一个<code>.git</code>的文件夹。这个文件夹通常是隐藏的，这也是git存储有关我们的项目历史信息和相关分支的地方。当然，你不需要了解太多，只是记住，不要删除这个文件夹。</p>
<h3 id="Git工作流"><a href="#Git工作流" class="headerlink" title="Git工作流"></a>Git工作流</h3><p>假设我们的工作文件夹已经初始化了一个git仓库，每当我们的项目达到我们所期望的状态时，我们可以记录我们的更改到存储库中，创建提交就像照快照一样。在git中，我们有一个特殊的区域或者叫做特殊的中间步骤，在其他的控制系统中不存在，它叫做暂存区，我们将修改后的文件添加到暂存区，如果一切正常，我们的快照将被永久地存储在存储库中。</p>
<p>我们可以使用：</p>
<p><code>git add "你的文件"</code>进行文件的添加（到工作区）。</p>
<p><code>git commit -m "提交的注释"</code>进行文件的提交（到存储库）</p>
<p><img src="https://img.imgdb.cn/item/6076e3eb8322e6675ce33b5f.jpg" alt="工作流"></p>
<p>值得注意的是，如果我们对file1和file2做了修改 ，我们还要使用<code>git add file1</code>来保存我们刚刚的修改（到暂存区），再提交到存储库中。当然，如果途中你删除了file1，同样也要使用add命令来更新暂存区（是的你没看错，即使是删除了文件，也是add命令）。</p>
<p>需要注意的是，git不会自动的追踪文件，我们需要手动的使用add指示git跟踪他们。我们可以使用：<code>git status</code>查看工作状态。如果你使用的是zsh终端，你也可以看出我们的提示标志变成了黄色，也就是“我们的工作区是脏的”，即可以进行下一次提交了。</p>
<p><img src="https://img.imgdb.cn/item/6076e4c58322e6675ce5582f.jpg" alt="提交"></p>
<h3 id="Git的提交？（commit）"><a href="#Git的提交？（commit）" class="headerlink" title="Git的提交？（commit）"></a>Git的提交？（commit）</h3><p>我们每次使用commit提交命令，git会生成唯一的标识符，当然它还包括提交的注释和相关内容的修改信息、通过谁可以获得我们项目完整的快照等等信息。</p>
<p>不同于其他许多版本控制系统，git不存储已经更改的部分，它存储完整的增量信息，这样可以让我们更快地进行恢复。</p>
<p>前面提到过使用<code>git commit -m "注释"</code>可以进行带注释的提交，那如果去掉<code>-m</code>的注释呢？是的。不加m选项可以直接打开默认的编辑器进行长注释的添加。值得注意的是，在这个文件中我们尽量使用标准的格式，也就是开始一段写较短的总结性的注释，接下来一段再写较长的注释。</p>
<p><img src="https://img.imgdb.cn/item/6076e6528322e6675ce8a68b.jpg" alt="长注释"></p>
<h4 id="什么时候该进行提交？"><a href="#什么时候该进行提交？" class="headerlink" title="什么时候该进行提交？"></a>什么时候该进行提交？</h4><p>不建议将提交的粒度分的太细，也不要过于大，这样会很难进行我们日后的修改，同样，不要尝试每天一定要提交多少次，也不要一次提交包含多个错误修复或更新。最佳的做法是当你的工作达到了你想到达的状态时，进行一次提交。</p>
<p><img src="https://img.imgdb.cn/item/6076e7ee8322e6675cec09a1.jpg" alt="什么时候该提交"></p>
</body></html>]]></content>
      <categories>
        <category>知识分享</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>建站纪念</title>
    <url>/2021/01/31/%E5%BB%BA%E7%AB%99%E7%BA%AA%E5%BF%B5/</url>
    <content><![CDATA[<html><head></head><body><p>事情的起源可能还要从那次计网课开始说起。</p>
<p>我们的计网老师是个不折不扣的“社会人”，雷厉风行、卓尔不群。每次上课的时候他都会随口布置一些他认为很简单的任务。但实际上，那时的我们从来没有听过他布置的任务，因为他从来不检查。可能是由于那时我们根本不懂得怎么搞计网，最多也就是买一个域名和一个免费的服务器，简单地在上面写写画画，等到服务器过期后就再也没有管过。</p>
<p>不过，这波啊。直到已经结课后的这个寒假，就想着做点什么吧。其实我也是早就有搭建一个小博客的想法，但是一直没有付诸于实践，这次趁着寒假终于有机会去实践它。</p>
<p>我以前没怎么接触过前端这一部分，很多东西其实还是要参考其他有经验的人。在此我非常感谢<a href="https://www.cnblogs.com/huanhao/p/hexobase.html#%E5%AE%89%E8%A3%85hexo%E5%92%8C%E5%88%9D%E5%A7%8B%E5%8C%96%E5%8D%9A%E5%AE%A2">huanhao</a>，是他分享了博客的搭建教程，写的非常详细。我也是主要参考了这篇博客，没有他的话我可能还要走不少弯路。</p>
<p>有时候看着别人的小站，自己也不禁在想，什么时候才能写出这么好的博客呢？我希望在这里分享我的感想、教程和自己各种项目上踩过的坑，将他记录下来，不仅可以方便自己日后查阅，同时也可能帮助到需要的人。</p>
</body></html>]]></content>
      <categories>
        <category>杂谈</category>
      </categories>
      <tags>
        <tag>建站纪念</tag>
      </tags>
  </entry>
  <entry>
    <title>怎么ping命令还需要root权限？</title>
    <url>/2021/08/06/%E6%80%8E%E4%B9%88ping%E5%91%BD%E4%BB%A4%E8%BF%98%E9%9C%80%E8%A6%81root%E6%9D%83%E9%99%90%EF%BC%9F/</url>
    <content><![CDATA[<html><head></head><body><h2 id="事情起因"><a href="#事情起因" class="headerlink" title="事情起因"></a>事情起因</h2><p>事情的起因是这样的，由于原本的WSL Ubuntu被我给玩坏了，所以打算准备卸载了从新安装一下，正好也想尝试尝试Debian这个上游的发行版。不过在我装好之后心血来潮执行了一次ping命令之后：</p>
<p><a href="https://pic.imgdb.cn/item/610c8f1b5132923bf840d72e.png"><img src="https://pic.imgdb.cn/item/610c8f1b5132923bf840d72e.png" alt="必须要加sudo的ping"></a></p>
<p>奇怪了，这个命令应该是不需要提升权限的呀，为什么这次必须要加上sudo才可以执行呢？话不多说，我们先来检查一下这个命令的权限配置情况：</p>
<p><a href="https://pic.imgdb.cn/item/610c8fb85132923bf8418f0b.png"><img src="https://pic.imgdb.cn/item/610c8fb85132923bf8418f0b.png" alt="ping的权限情况"></a></p>
<p>蛤，这个命令所有者原来是root呀，回想下<code>passwd</code>这个命令的权限情况我们不难看出，原来是我们没有赋予<code>ping</code>这个程序<code>suid</code>权限，所以普通用户无法执行。那解决方法也很简单，就是赋予其<code>suid</code>权限即可。</p>
<p><a href="https://pic.imgdb.cn/item/610c91125132923bf84308e9.png"><img src="https://pic.imgdb.cn/item/610c91125132923bf84308e9.png" alt="给予ping suid权限"></a></p>
<p>可以看到，我们给了<code>suid</code>权限后（注意权限位置<code>s</code>），这个命令就可以通过普通用户执行啦。其中<code>suid</code>权限的意思是在普通用户执行的时候可以短暂获得root权限级别而不需要申请。详细的讲解可以查看这篇：<a href="http://c.biancheng.net/view/868.html">suid权限详解</a></p>
<h2 id="进一步探索"><a href="#进一步探索" class="headerlink" title="进一步探索"></a>进一步探索</h2><p>由于我记得以前ping的时候是不需要提升权限的，于是便抱着尝试的心态看了看CentOS 7关于ping的权限情况，然鹅出大问题兄弟们。在CentOS 7或者Ubuntu20.04LTS上，这个命令是不需要root权限的，但是在检查ping程序的权限时我发现，这个命令的权限竟然没有设置<code>suid</code>位。这就很奇怪了，同样都没有设置<code>suid</code>，为社么WSL Debian的不行，但是CentOS 7和Ubuntu20.04LTS就可以执行呢？</p>
<p>下面是Ubuntu20.04LTS的ping权限，可以看出没有<code>suid</code>权限，但是普通用户也可以执行。甚是奇怪。</p>
<p><a href="https://pic.imgdb.cn/item/610c98935132923bf84c410a.png"><img src="https://pic.imgdb.cn/item/610c98935132923bf84c410a.png" alt="Ubuntu的ping权限"></a></p>
<p>那既然这里和我们具体的执行权限关联似乎并不大，那说明必定在其他地方也有控制程序执行的权限。遇事不决我先<code>man</code>一下。在ping的man手册中，最后的安全部分有这么一段话：</p>
<p><a href="https://pic.imgdb.cn/item/610c9d075132923bf8530c05.png"><img src="https://pic.imgdb.cn/item/610c9d075132923bf8530c05.png" alt="debian的man"></a></p>
<p>首先我们已经知道了ping走的是ICMP协议，而且，各项都指出我们必须能创建ICMP套接字才可以执行此程序。那我怎么知道普通用户能否创建ICMP套接字呢？我们继续man（笑）</p>
<blockquote>
<p><code>man icmp</code>    (注意这是Linux Programmer’s Manual，部分发行版出场可能没有带相关的包，必须安装后才可以man到icmp)，或者可以通过Debian的Wiki进行查询：<a href="https://manpages.debian.org/buster/manpages/icmp.7.en.html">man icmp的wiki</a> 注意不要看中文版，中文版不全面。</p>
<p><code>sudo apt install manpages</code>来进行安装。</p>
</blockquote>
<p>我们看看我们能发现什么。</p>
<p>首先我们又知道了ICMP 支持通过sysctl接口来设置一些全局IP参数，并且配置文件的位置是<code>*/proc/sys/net/ipv4/*</code>.</p>
<p><a href="https://pic.imgdb.cn/item/610ca7105132923bf8618328.png"><img src="https://pic.imgdb.cn/item/610ca7105132923bf8618328.png" alt="man icmp"></a></p>
<p>接下来我们终于注意到什么样的用户才可以创建ICMP scokets了：</p>
<p><a href="https://pic.imgdb.cn/item/610ca81e5132923bf8638a9f.png"><img src="https://pic.imgdb.cn/item/610ca81e5132923bf8638a9f.png" alt="man icmp2"></a></p>
<p>这段的意思是说。允许创建 ICMP 套接字的组 ID 的范围是（包括最小和最大组 ID）。默认值为“1 0”，表示不允许任何组创建 ICMP Echo 套接字。那让我们看看我们WSL的Debian这个值是多少吧：</p>
<p><a href="https://pic.imgdb.cn/item/610ca8cf5132923bf864a9ed.png"><img src="https://pic.imgdb.cn/item/610ca8cf5132923bf864a9ed.png" alt="查看icmp值"></a></p>
<p>那Ubuntu的值呢？</p>
<p><a href="https://pic.imgdb.cn/item/610ca95c5132923bf865dbba.png"><img src="https://pic.imgdb.cn/item/610ca95c5132923bf865dbba.png" alt="ubuntu的icmp值"></a></p>
<p>这下就能说的通了，Ubuntu的值设定的是<code>0</code>到一个超大的组的值，也就是说，基本上所有的组都可以创建ICMP套接字，所以普通用户也就可以创建ICMP套接字，从而普通用户也可以执行ping命令。所以此时该命令的能否执行已经与suid权限没有太大关系了。</p>
<h3 id="所以说ip-forward又是什么？"><a href="#所以说ip-forward又是什么？" class="headerlink" title="所以说ip_forward又是什么？"></a>所以说ip_forward又是什么？</h3><p>如同<code>ping_group_range</code>是Linux内核提供的，这个转发数据包的能力也是Linux内核所提供的。我们知道在局域网络里面的主机可以透过广播的方式来进行网络封包的传送，但在不同网段内的主机想要互相联机时，就得要透过路由器了。既然主机想要将数据传送到不同的网域时得透过路由器的帮忙，所以，路由器的主要功能就是：“转递网络封包“嘛！也就是说，路由器会分析来源端封包的  IP 表头，在表头内找出要送达的目标 IP 后，透过路由器本身的路由表 (routing table) 来将这个封包向下一个目标 (next  hop) 传送。这也就是路由器的功能。</p>
<p>而为什么WSL  Debian只有这一个配置文件我觉的这可能与WSL1有关吧。可能这些命令并没有直接调用Linux的底层而是直接走的Windows的底层，毕竟WSL Debian的这个文件夹只有这一个文件，而虚拟机中的这个文件夹可是有一堆文件的哦。当然这都是我的个人猜测。</p>
<h2 id="我们学到了什么？"><a href="#我们学到了什么？" class="headerlink" title="我们学到了什么？"></a>我们学到了什么？</h2><p>我们来理一理我们的思路，我们一路从一个普通用户无法执行ping命令而已，一路追查到这里。我记得当初看鸟哥的书的时候，他说过一句话：学习Linux更多的时候培养的是解决问题的能力，每一个东西都是新的，同样经过这次摸索是不是觉得原来底层原来这么庞大，我们看到的只不过是冰山一隅罢了。</p>
</body></html>]]></content>
      <categories>
        <category>教程</category>
      </categories>
      <tags>
        <tag>疑惑与排查</tag>
      </tags>
  </entry>
  <entry>
    <title>树莓派安装MySQL并且开启远程访问</title>
    <url>/2021/03/10/%E6%A0%91%E8%8E%93%E6%B4%BE%E5%AE%89%E8%A3%85MySQL%E5%B9%B6%E4%B8%94%E5%BC%80%E5%90%AF%E8%BF%9C%E7%A8%8B%E8%AE%BF%E9%97%AE/</url>
    <content><![CDATA[<html><head></head><body><h3 id="环境简介"><a href="#环境简介" class="headerlink" title="环境简介"></a>环境简介</h3><p>本次采用的环境仍就是刷入了基于Debian buster的树莓派操作系统。</p>
<p><a href="https://img.imgdb.cn/item/6048b7cc5aedab222c746549.jpg"><img src="https://img.imgdb.cn/item/6048b7cc5aedab222c746549.jpg" alt="环境简介"></a></p>
<p>本来想安装MySQL数据库的， <em>但是查找了一圈发现镜像里木有MySQL数据库，于是便转向了MarinaDB.</em> 这俩数据库，虽说差不多，而且是由同一个团队开发，但是部分的配置文件的地点还是有些不同，经过查找资料，决定将此次过程记录下来，方便日后与大家。</p>
<p>本次使用ssh连接到树莓派进行操作。</p>
<p>树莓派采用的是中科大的镜像源。<a href="http://mirrors.ustc.edu.cn/help/debian.html">中科大源链接</a></p>
<h3 id="安装MariaDB"><a href="#安装MariaDB" class="headerlink" title="安装MariaDB"></a>安装MariaDB</h3><figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">sudo apt-get install mariadb-server</span><br></pre></td></tr></tbody></table></figure>
<p><a href="https://img.imgdb.cn/item/6048ba7c5aedab222c7626af.jpg"><img src="https://img.imgdb.cn/item/6048ba7c5aedab222c7626af.jpg" alt="安装"></a></p>
<p>安装成功后启动数据库并且配置开机自动启动（可选）</p>
<figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">sudo systemctl start mariadb</span><br><span class="line">sudo systemctl enable mariadb</span><br></pre></td></tr></tbody></table></figure>
<p>可以使用<code>systemctl status mariadb</code>查看是否启动。</p>
<h3 id="配置MariaDB的root密码"><a href="#配置MariaDB的root密码" class="headerlink" title="配置MariaDB的root密码"></a>配置MariaDB的root密码</h3><p>首先让我们登陆数据库：<code>sudo mysql -u root -p</code> 首次登陆不需要密码，弹出输入密码的提示直接回车即可。</p>
<p>接下来我们配置一下root用户的密码，依次执行下列三句话：</p>
<figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">update mysql.user set plugin='mysql_native_password' where user='root';</span><br><span class="line">update mysql.user set password=password("你的root密码") where user='root'; </span><br><span class="line">FLUSH PRIVILEGES;</span><br></pre></td></tr></tbody></table></figure>
<p><a href="https://img.imgdb.cn/item/6048bd2d5aedab222c77cc9d.jpg"><img src="https://img.imgdb.cn/item/6048bd2d5aedab222c77cc9d.jpg" alt="更改root密码"></a></p>
<p>这样root的密码就配置好了。</p>
<h3 id="设置打开MariaDB的远程连接许可"><a href="#设置打开MariaDB的远程连接许可" class="headerlink" title="设置打开MariaDB的远程连接许可"></a>设置打开MariaDB的远程连接许可</h3><p>回到终端环境。首先编辑配置文件：</p>
<figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">sudo nano /etc/mysql/mariadb.conf.d/50-server.cnf</span><br></pre></td></tr></tbody></table></figure>
<p>注释掉<code>bind-address = 127.0.0.1</code>这一行：</p>
<h3 id="设置用户的远程登录权限"><a href="#设置用户的远程登录权限" class="headerlink" title="设置用户的远程登录权限"></a><strong>设置用户的远程登录权限</strong></h3><p>在数据库中：</p>
<blockquote>
<p>方法一： 设置新远程用户（推荐）</p>
<figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">CREATE USER '你的用户名'@'%' IDENTIFIED BY '你的密码'; </span><br><span class="line">GRANT ALL PRIVILEGES ON *.* TO '你的用户名'@'%' IDENTIFIED BY '你的密码' WITH GRANT OPTION; </span><br><span class="line">FLUSH PRIVILEGES;</span><br></pre></td></tr></tbody></table></figure>

<p><a href="https://img.imgdb.cn/item/6048c09e5aedab222c7a3556.jpg"><img src="https://img.imgdb.cn/item/6048c09e5aedab222c7a3556.jpg" alt="创建新用户"></a></p>
<p>例如这里创建了一个名为<code>raspisql</code>的用户。</p>
</blockquote>
<blockquote>
<p>方法二： 直接修改root用户的远程权限</p>
<figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">USE mysql;</span><br><span class="line">UPDATE user SET host = '%' WHERE user = 'root';</span><br><span class="line">GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY '' WITH GRANT OPTION; </span><br><span class="line">FLUSH PRIVILEGES;</span><br></pre></td></tr></tbody></table></figure>

<p>完成之后退出数据库。</p>
</blockquote>
<h3 id="重启MariaDB"><a href="#重启MariaDB" class="headerlink" title="重启MariaDB"></a>重启MariaDB</h3><figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">sudo systemctl restart mariadb</span><br></pre></td></tr></tbody></table></figure>
<h3 id="本地远程测试"><a href="#本地远程测试" class="headerlink" title="本地远程测试"></a>本地远程测试</h3><p>本地使用DataGrip数据库管理软件进行连接测试：</p>
<p>在DataGrip中依次点击File-&gt; New-&gt;Data Source-&gt; MariaDB：</p>
<p><a href="https://img.imgdb.cn/item/6048c1e65aedab222c7b43a3.png"><img src="https://img.imgdb.cn/item/6048c1e65aedab222c7b43a3.png" alt="本地连接"></a></p>
<p>接着填好相关信息，第一次使用可能需要下载驱动程序。</p>
<p><a href="https://img.imgdb.cn/item/6048c3e15aedab222c7d0161.jpg"><img src="https://img.imgdb.cn/item/6048c3e15aedab222c7d0161.jpg" alt="dataGrip"></a></p>
<p>配置完成后就出现在了我们的侧边栏中，此时与你在本地的数据库是一样的。比如我这里将普通用户和root用户都进行了链接：</p>
<p><a href="https://img.imgdb.cn/item/6048c4645aedab222c7d77ce.jpg"><img src="https://img.imgdb.cn/item/6048c4645aedab222c7d77ce.jpg" alt="2"></a></p>
<p>这下操作就和本地的一模一样。</p>
</body></html>]]></content>
      <categories>
        <category>教程</category>
      </categories>
      <tags>
        <tag>树莓派</tag>
      </tags>
  </entry>
  <entry>
    <title>让你的WSL2运行Linux GUI程序吧</title>
    <url>/2021/10/04/%E8%AE%A9%E4%BD%A0%E7%9A%84WSL2%E8%BF%90%E8%A1%8CLinux-GUI%E7%A8%8B%E5%BA%8F%E5%90%A7/</url>
    <content><![CDATA[<html><head></head><body><h3 id="WSL2简介"><a href="#WSL2简介" class="headerlink" title="WSL2简介"></a>WSL2简介</h3><p><strong>WSL</strong>全称<strong>Windows Subsystem for Linux</strong>，官方翻译“适用于Linux的Windows子系统”.</p>
<p><strong>WSL 2</strong> 是适用于 Linux 的 Windows 子系统体系结构的一个新版本，它支持适用于 Linux 的 Windows 子系统在 Windows 上运行 Linux 的二进制文件。 它的主要目标是<strong>提高文件系统性能</strong>，以及添加<strong>完全的系统调用兼容性</strong>。WSL 2的使用方式与Linux别无二致，你可以很方便的在WSL  2中使用Linux的各种命令。但是需要注意的是，WSL中的文件都默认是777权限，这点可能与真实Linux环境不同，某些在WSL中运行正常的程序或者命令，在真实Linux中可能因权限问题而运行失败。</p>
<p>我们下面的操作都将围绕WSL2进行，这两个版本是可以相互存在的，如果你没有升级的话可以先进行升级WSL2的操作。</p>
<h3 id="准备工作1——安装XServer图形接口"><a href="#准备工作1——安装XServer图形接口" class="headerlink" title="准备工作1——安装XServer图形接口"></a>准备工作1——安装XServer图形接口</h3><p>要使默认仅支持命令行的WSL2支持GUI程序，首先必须安装XServer服务器，它可以给应用提供基本的图形服务。你可以在<a href="https://sourceforge.net/projects/vcxsrv/">这里</a>下载这个程序，安装到一个你想要的位置，无脑下一步即可。安装完成后，双击图标打开后配置如下：</p>
<p><a href="https://pic.imgdb.cn/item/615af4192ab3f51d91fb8e25.jpg"><img src="https://pic.imgdb.cn/item/615af4192ab3f51d91fb8e25.jpg" alt="配置1"></a></p>
<p><a href="https://pic.imgdb.cn/item/615af45e2ab3f51d91fbf60a.jpg"><img src="https://pic.imgdb.cn/item/615af45e2ab3f51d91fbf60a.jpg" alt="配置2"></a></p>
<p><a href="https://pic.imgdb.cn/item/615af4732ab3f51d91fc1451.jpg"><img src="https://pic.imgdb.cn/item/615af4732ab3f51d91fc1451.jpg" alt="配置3"></a></p>
<p><strong>接下来我们给XServer配置防火墙放行</strong></p>
<p><a href="https://pic.imgdb.cn/item/615af72c2ab3f51d91000f61.jpg"><img src="https://pic.imgdb.cn/item/615af72c2ab3f51d91000f61.jpg" alt="防火墙1"></a></p>
<p><a href="https://pic.imgdb.cn/item/615af7462ab3f51d91003605.jpg"><img src="https://pic.imgdb.cn/item/615af7462ab3f51d91003605.jpg" alt="防火墙2"></a></p>
<h3 id="准备工作2——WSL2设置"><a href="#准备工作2——WSL2设置" class="headerlink" title="准备工作2——WSL2设置"></a>准备工作2——WSL2设置</h3><p>接下来在WSL2中，编辑你的<code>.bashrc</code>或<code>.zshrc</code>，添加如下代码：</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> DISPLAY=<span class="variable">${DISPLAY:-$(grep -Po '(?&lt;=nameserver ).*' /etc/resolv.conf):0}</span></span><br><span class="line"><span class="built_in">export</span> LIBGL_ALWAYS_INDIRECT=1</span><br></pre></td></tr></tbody></table></figure>
<p>然后别忘记了执行<code>source ~/.bashrc</code>或<code>source ~/.zshrc</code></p>
<h3 id="效果对比"><a href="#效果对比" class="headerlink" title="效果对比"></a>效果对比</h3><p>下面基本上就完成了配置工作，下面试着装一个GUI程序，直接用命令执行它，例如Firefox：</p>
<p><a href="https://pic.imgdb.cn/item/615afa192ab3f51d91047e0e.jpg"><img src="https://pic.imgdb.cn/item/615afa192ab3f51d91047e0e.jpg" alt="Linux下的Firefox"></a></p>
<p>当然还可以运行Linux的QQ：</p>
<p><a href="https://pic.imgdb.cn/item/615afab52ab3f51d910572cb.jpg"><img src="https://pic.imgdb.cn/item/615afab52ab3f51d910572cb.jpg" alt="Linuxqq"></a></p>
</body></html>]]></content>
      <categories>
        <category>教程</category>
      </categories>
      <tags>
        <tag>折腾</tag>
      </tags>
  </entry>
  <entry>
    <title>来自圣诞的年终总结</title>
    <url>/2021/12/25/%E6%9D%A5%E8%87%AA%E5%9C%A3%E8%AF%9E%E7%9A%84%E5%B9%B4%E7%BB%88%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<html><head></head><body><p>12月25日，一个平平常常的日子，细蒙蒙的雪花夹杂着刺骨的寒风，正纷纷扬扬地洒向大地。看向窗外曾经记忆中的白色大地，人们说这是一个白色圣诞节。</p>
<p>当上一个圣诞结来到的时候，我也像现在这样，只不过当时是坐在教室里，也许正准备着下一场考试，走神的时候顺便谋划着寒假的想干的事。每次放假之前我都非常喜欢思考，一边想着一定要做点什么，另一边却在烦恼着做点什么好，甚至担心什么都没干就这么过去了。但事实证明，想法之于想法，终究是想法；仔细回想一下实际上每次放假很大一部分时间我并没有放在学习上，也没有放在更有意义的事情上。陪伴我的，更多的是手机、电脑、和来自同学的相聚。</p>
<p>也许是受当时硬件课程设计的影响，听说了一种叫做“树莓派”的神奇物件。当时也是不知道从哪来的动力，心潮澎湃，跃跃欲试，于是随着寒假的到来就入手了一台4B。也是在同一时间，想起了当时网络课要求注册的域名和服务器，服务器早已到期，并且觉得自己其实并没有必要去负高额的云服务器费用，就Bing了如何用Github“白嫖”个人博客的教程，也终于将这个小站建立了起来，并且写了第一篇文章——《建站纪念》。说起网站域名的起名，其实在后来网站不知被某位搜索能力极强的人士发现后问过我；起初老师是让我们用自己的真实名字抢注自己的域名，但是我觉得这样的英文字母组合实在太过俗气和从审美以及发音上太过粗糙。正巧当时也算半个二次元，非常喜欢《小南极》中的kimari，与自己喜欢的表情包kemomimi酱，于是Knomori便诞生了。</p>
<p>随着树莓派搞机的推进，我也一直在搜索大家都在用它干什么，我并不讨厌仅仅使用树莓派做一个单纯的服务器，也并不急于“我看别人都用树莓派做什么智能小车和各种智能家居”之类的些言论。之后，一个新奇的想法萌生心头：“你为什么不去分享你的经验到B站呢？”对呀，对于我来说似乎有着一些微不足道的优势，咱也剪过视频。于是同样的寒假，怀着忐忑不安的心情投下了第一篇稿件《从零开始安装树莓派系统并通过ssh远程启动》。虽然在这之前也看了大量的教程，教新人UP如何快速入手，不过面对那超级尴尬的配音，现在回想起来都觉得尴尬。也许后面可以搜一下为什么自己听自己的声音不像自己的之类的问题？</p>
<p>今年的圣诞回顾寒假的一切，不免觉得有些叹息，虽然网站仍旧保持着随心所欲更新的习惯，但是up领域早已荒废多时，感觉每次面对繁琐的剪辑和温暖的被窝，仍是不由自主地选择后者，其实还有好多次都新建了文件夹，并且录制好了素材，但常常卡在了文案上面，很多时并没有一个很明确的想法去如何表达和开场。而且已有的作品虽然不知道怎么就被同学发现后，也会发来的“哇，你的视频我看到了，不错啊”的情况。但自己还是会回道：“千万不要告诉别人啊”之类的话。毕竟自己是什么样子自己最清楚，我其实并不满意当初的作品，就像发说说一样，自娱自乐而已，觉得它不值得拿出台面。</p>
<p>就像人们常说的，第一步总是从好奇心开始的。有时候这种东西就是给自己看的，就像视频发稿前一天晚上经历了PR崩溃的痛苦，当时还在空间发了一条说说，但是肯定也没有人会知道，第二天视频就会悄无声息的上线了。现在翻看这些说说，突然觉得当时自己还蛮有趣的哈哈哈。</p>
<p>番剧也是我生活的一部分，那些曾经三刷甚至四刷的番剧，现在看来仍旧如数家珍。同样也是因为漫评认识了许多人，加入了一个up的古典部，与其中的小伙伴们分享自己的感受，也在里面催过up的稿件，比如樱花庄这期就是在我们的耳鬓厮磨下。但是还是非常可惜，古典部在今年的中旬解散了，也许大家也都各有想法吧，不过我加入的这段时间里，还是每天都会查看群友们又有什么新奇的想法，又遇到了哪个好看的番，有时我也会像他们一样，分享我自己的看番感悟和有趣人和事。又是后真的会发现，也许你喜欢的人并不在你生活的圈子里，我也曾想过，要多加一些这种群，了解一下他人的趣事和他们所经历的青春。就像梭罗所说的那样：“在目前难以言说的话语，我们发现在别处或许已经说出来了。那些扰乱了我们，使我们深感迷惑和伤透脑筋的问题也曾经发生在所有人的身上；没有一个问题被漏掉；而且每一个人都按照各自的能力，用各自的话和各自的生活回答过它们。”</p>
<p>21年的春与初夏像是约定好似的，熟悉的人和事，熟悉的校园。唯一使这熟悉的场景有别与往年的事还是要属母校的70“大寿”了哈哈哈。从说说里仍旧可以看出当时的热闹与车水马龙。</p>
<p>眼尖的人已经在初春找到了暑假将要去实习的地方，可惜我当时没有这方面的概念，也在纠结到底是考研还是找工作，最后还是决定暑假开始复习，然后找工作吧。这个暑假也是第一次留在了学校，与舍友一起，天天跑图书馆，复习与准备的一个假期。</p>
<p>与盛夏那灿烂的骄阳一同见证校园的除了我们还有无数考研的人和找工作复习的人。只有留校了才会明白，原来夏日的校园并不死寂，相反，有怀着各种心情的人，走在大道上、朝着图书室，甚或是傍晚饭后与同学一起撸着猫咪。每每这时候就会有百般焦虑，在写简历的时候曾经的纠结与迷茫也在此刻不断涌上脑海，我大学几年，究竟留下了什么？没有客观的成绩，没有丰富的社会实践经验，没有奖学金，没有各种证书，没有科研经历。我也一度想过，有些人在大一的时候就找到了自己的另一半，从结果上来看，这四年他的收获不比其他人少。甚至多年后我们才发现，那才是你弥足珍贵的宝物。对于我一个普通的不能再普通的大学生来说，似乎什么也不曾带来，什么也不没有带走。在自己的兴趣与学业上，我平衡地走过了这并不容易的几年的时光。而那个她，始终没有出现，就像，一直以来一样。</p>
<p>这是神奇的一年，年初以隔离开的年，现在又以隔离结束。（合着我隔离了一年？）</p>
<p>圣诞过后，接下来又是悠长的假期，这样也好，就好好休息吧。没问题，身体休息的时候内心必须有所改变。因为总会有人来结束这悠长的假期。</p>
</body></html>]]></content>
      <categories>
        <category>杂谈</category>
      </categories>
      <tags>
        <tag>2021年终总结</tag>
      </tags>
  </entry>
</search>
